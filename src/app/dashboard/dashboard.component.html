<br>
<div>
    <div class="container-fluid" *ngIf="general.isDesktopDevice">
        <mat-card>
            <div class="row">
                <div class="col-md-12 col-sm-12">
                    <table class="table table-borderless  text-center">
                        <thead>
                            <tr>
                                <th class="pl-md-3">Vehicle for <br> service today</th>
                                <th class="pl-md-5">Vehicle under <br>service</th>
                                <th class="pl-md-5"> Serviced <br> vehicle</th>
                                <th class="pl-md-5">OverAll efficiency <br> of the SC</th>
                                <th class="pl-md-5">Avg. servicing time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="pl-md-3">
                                    <circle-progress class="circle" [percent]="serviceCount.vehicleForServiceTodayCount"
                                        [maxPercent]="1000" [showUnits]="false" [showBackground]="true"
                                        [backgroundColor]="'#002060'" [outerStrokeColor]="'#ffffff'"
                                        [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                        [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5
                                        [animation]="true" [animationDuration]="500" [startFromZero]="true"
                                        [responsive]="true"></circle-progress>
                                </td>
                                <td class="pl-md-5">
                                    <circle-progress class="circle" [percent]="serviceCount.vehicleUnderServiceCount"
                                        [maxPercent]="1000" [showUnits]="false" [showBackground]="true"
                                        [backgroundColor]="'#002060'" [outerStrokeColor]="'#ffffff'"
                                        [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                        [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5
                                        [animation]="true" [animationDuration]="500" [startFromZero]="true"
                                        [responsive]="true"></circle-progress>
                                </td>
                                <td class="pl-md-5">
                                    <circle-progress class="circle" [percent]="serviceCount.servicedVehicleCount"
                                        [maxPercent]="1000" [showUnits]="false" [showBackground]="true"
                                        [backgroundColor]="'#002060'" [outerStrokeColor]="'#ffffff'"
                                        [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                        [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5
                                        [animation]="true" [animationDuration]="500" [startFromZero]="true"
                                        [responsive]="true"></circle-progress>
                                </td>
                                <td class="pl-md-5">
                                    <circle-progress class="circle" [percent]="serviceCount.overAllEfficiency"
                                        [maxPercent]="1000" [showUnits]="true" [unitsColor]="'#ffffff'"
                                        [showBackground]="true" [backgroundColor]="'#002060'"
                                        [outerStrokeColor]="'#ffffff'" [outerStrokeWidth]=6 [showInnerStroke]=false
                                        [radius]=60 [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5
                                        [animation]="true" [animationDuration]="500" [startFromZero]="true"
                                        [responsive]="true">
                                    </circle-progress>
                                </td>
                                <td class="pl-md-5 pt-md-5">
                                    <span class="font-weight-bold font">{{serviceCount.avgServiceTime}} min</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- <div class="col-md-3 col-sm-5 text-center pt-5">
                    <mat-card>
                        <mat-card-content>Least Performing zone</mat-card-content>
                    </mat-card> <br>
                    <mat-card>
                        <mat-card-content>High Congestion zone</mat-card-content>
                    </mat-card>
                </div> -->
            </div>
        </mat-card>
    </div>

    <div class="container-fluid" *ngIf="!general.isDesktopDevice">
        <mat-card >
            <div class="row">
                <div class="col-md-12">
                    <div class="row text-center">
                        <div class="col-md-6">
                            <h2>Vehicle for Service Today</h2>
                            <circle-progress class="circle" [percent]="vehicleForServiceTodayCount" [maxPercent]="1000"
                                [showUnits]="false" [showBackground]="true" [backgroundColor]="'#002060'"
                                [outerStrokeColor]="'#ffffff'" [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5 [animation]="true"
                                [animationDuration]="500" [startFromZero]="true" [responsive]="true"></circle-progress>
                        </div>
                        <div class="col-md-6">
                            <h2>Vehicle Under <br> Service</h2>
                            <circle-progress class="circle " [percent]="vehicleUnderServiceCount" [maxPercent]="1000"
                                [showUnits]="false" [showBackground]="true" [backgroundColor]="'#002060'"
                                [outerStrokeColor]="'#ffffff'" [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5 [animation]="true"
                                [animationDuration]="500" [startFromZero]="true" [responsive]="true"></circle-progress>
                        </div>


                    </div> <br>
                    <div class="row text-center">
                        <div class="col-md-6">
                            <h2>Serviced <br> Vehicle</h2>
                            <circle-progress class="circle" [percent]="this.servicedVehicleCount" [maxPercent]="1000"
                                [showUnits]="false" [showBackground]="true" [backgroundColor]="'#002060'"
                                [outerStrokeColor]="'#ffffff'" [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60
                                [titleColor]="'#ffffff'" [showSubtitle]=false [backgroundPadding]=5 [animation]="true"
                                [animationDuration]="500" [startFromZero]="true" [responsive]="true"></circle-progress>
                        </div>
                        <div class="col-md-6">
                            <h2>OverAll Efficiency of the SC</h2>
                            <circle-progress class="circle" [percent]="50" [maxPercent]="1000" [showUnits]="false"
                                [showBackground]="true" [backgroundColor]="'#002060'" [outerStrokeColor]="'#ffffff'"
                                [outerStrokeWidth]=6 [showInnerStroke]=false [radius]=60 [titleColor]="'#ffffff'"
                                [showSubtitle]=false [backgroundPadding]=5 [animation]="true" [animationDuration]="500"
                                [startFromZero]="true" [responsive]="true"></circle-progress>
                        </div>

                    </div>
                </div>
                <!-- <div class="col-md-4 text-center">
                    <mat-card>
                        <mat-card-content>Least Performing zone</mat-card-content>
                    </mat-card>
                    <br>
                    <mat-card>
                        <mat-card-content>High Congestion zone</mat-card-content>
                    </mat-card>
                </div> -->
            </div>
        </mat-card>
    </div>

    <br>
    <mat-card class="ml-3 mr-3">
        <div>
            <div class="flex">
                <div>
                    <form>
                        <mat-form-field class="search">
                            <mat-label>Vehicle number</mat-label>
                            <mat-icon matPrefix>search</mat-icon>
                            <input matInput tabindex="1" type='search' (keyup)="searchVehicle($event.target.value)">
                            <mat-hint class="align-items-start"><strong>Search using vehicle number</strong> </mat-hint>
                        </mat-form-field>
                    </form>
                    <p class="error" *ngIf="errStatus.searchError">{{errStatus.searchMessage}}</p>
                </div>
                <div>
                    <button mat-flat-button routerLink="/congestion" color="primary" matTooltip="Click here for congestion data">Congestion</button>&nbsp;&nbsp;
                    <button mat-mini-fab color="primary" class="cursor" (click)="getZones()" matTooltip="Refresh">
                        <mat-icon>autorenew</mat-icon>
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="map-container">
                <div class="map-frame">
                    <div id="map" #mapId></div>
                </div>
            </div>
        </div>
    </mat-card> <br>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6">
                <mat-card *ngIf="!zoneClickStatus.status">
                    <mat-card-content>
                        <table class="table bordered table-striped table-md-responsive text-center ">
                            <thead class="thead-dark font-weight-bold">
                                <tr>
                                    <th>Zone</th>
                                    <th>No. of Vehicles</th>
                                    <th>Avg. Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="cursor" *ngFor="let a of zoneList; let i = index" (click)="zoneClick(a)"
                                    [ngClass]='a.highlight ? "selected" : "not-selected"'>
                                    <td>{{a.zoneName}}</td>
                                    <td>{{a.vehicleCount}}</td>
                                    <td [ngClass]="a.isDelay ? 'delay' : '' ">{{a.time}} minutes</td>
                                </tr>
                            </tbody>
                        </table>
                    </mat-card-content>
                </mat-card>
                <mat-card *ngIf="zoneClickStatus.status">
                    <mat-card-title>
                        {{zoneClickStatus.zone}}
                    </mat-card-title>
                    <mat-card-content style="overflow-x: scroll;">
                        <table *ngIf="deviceGroupList.length"
                            class="table bordered table-striped table-md-responsive text-center ">
                            <thead class="thead-dark font-weight-bold">
                                <tr>
                                    <th>Vehicle</th>
                                    <th>Location</th>
                                    <th>SDT</th>
                                    <th>EDT</th>
                                    <th>Status</th>
                                    <th>Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let a of deviceGroupList; let i = index" (click)="vehicleStatus(a)"
                                    class="cursor">
                                    <ng-container>

                                        <td>{{a.deviceName}}</td>
                                        <td>{{a.coinName}}</td>
                                        <td>{{getSDT(a) | date : 'medium'}}</td>
                                        <td>{{getEDT(a) | date : 'medium'}}</td>
                                        <td *ngIf="a.isDelay">Delayed</td>
                                        <td *ngIf="!a.isDelay">On time</td>
                                        <td [ngClass]="a.isDelay ? 'delay' : 'not-delay' ">{{a.time}} minutes</td>
                                    </ng-container>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="!deviceGroupList.length" class="nodata">
                            No data found
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
            <div class="col-md-6">
                <mat-card>
                    <mat-card-content>
                        <div id="line"></div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </div>